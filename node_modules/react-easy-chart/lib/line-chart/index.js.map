{"version":3,"sources":["../../modules/line-chart/index.js"],"names":["dateParser","LineChart","data","PropTypes","array","isRequired","width","number","height","xType","string","yType","datePattern","interpolate","style","object","margin","axes","bool","grid","verticalGrid","xDomainRange","yDomainRange","tickTimeDisplayFormat","yTicks","xTicks","dataPoints","lineColors","axisLabels","shape","x","y","yAxisOrientRight","mouseOverHandler","func","mouseOutHandler","mouseMoveHandler","clickHandler","props","uid","lineChart","refs","m","w","h","node","setAttribute","left","right","top","bottom","append","attr","root","label","axis","scale","orient","tickFormat","format","tickSize","tickPadding","ticks","group","call","text","xValue","yValue","colors","getStroke","d","i","linePath","line","selectAll","enter","calculateDate","v","parseDate","calculateCX","calculateCY","mouseover","mouseout","mousemove","click","forEach","item","datum","on","scope","axisStyles","rules","datePatternParser","concat","createSvgNode","createSvgRoot","p","calculateChartParameters","createXAxis","createYAxis","createLinePathChart","createPoints","className","createStyle","toReact","Component"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport { createElement } from 'react-faux-dom';\nimport {\n  event as lastEvent,\n  select,\n  svg,\n  time\n} from 'd3';\nimport {\n  createUniqueID,\n  reduce,\n  calculateMargin,\n  createValueGenerator,\n  createDomainRangeGenerator,\n  defaultColors,\n  defaultStyles,\n  getAxisStyles,\n  createCircularTicks\n} from '../shared';\nimport { Style } from 'radium';\nimport merge from 'lodash.merge';\nimport { timeParse as parse } from 'd3-time-format';\n\nconst dateParser = {};\n\nexport default class LineChart extends React.Component {\n  static get propTypes() {\n    return {\n      data: React.PropTypes.array.isRequired,\n      width: React.PropTypes.number,\n      height: React.PropTypes.number,\n      xType: React.PropTypes.string,\n      yType: React.PropTypes.string,\n      datePattern: React.PropTypes.string,\n      interpolate: React.PropTypes.string,\n      style: React.PropTypes.object,\n      margin: React.PropTypes.object,\n      axes: React.PropTypes.bool,\n      grid: React.PropTypes.bool,\n      verticalGrid: React.PropTypes.bool,\n      xDomainRange: React.PropTypes.array,\n      yDomainRange: React.PropTypes.array,\n      tickTimeDisplayFormat: React.PropTypes.string,\n      yTicks: React.PropTypes.number,\n      xTicks: React.PropTypes.number,\n      dataPoints: React.PropTypes.bool,\n      lineColors: React.PropTypes.array,\n      axisLabels: React.PropTypes.shape({\n        x: React.PropTypes.string,\n        y: React.PropTypes.string\n      }),\n      yAxisOrientRight: React.PropTypes.bool,\n      mouseOverHandler: React.PropTypes.func,\n      mouseOutHandler: React.PropTypes.func,\n      mouseMoveHandler: React.PropTypes.func,\n      clickHandler: React.PropTypes.func\n    };\n  }\n\n  static get defaultProps() {\n    return {\n      width: 200,\n      height: 150,\n      datePattern: '%d-%b-%y',\n      interpolate: 'linear',\n      axes: false,\n      xType: 'linear',\n      yType: 'linear',\n      lineColors: [],\n      axisLabels: {\n        x: '',\n        y: ''\n      },\n      mouseOverHandler: () => {},\n      mouseOutHandler: () => {},\n      mouseMoveHandler: () => {},\n      clickHandler: () => {}\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.uid = createUniqueID(props);\n  }\n\n  componentDidMount() {\n    const lineChart = this.refs.lineChart;\n    createCircularTicks(lineChart);\n  }\n\n  componentDidUpdate() {\n    const lineChart = this.refs.lineChart;\n    createCircularTicks(lineChart);\n  }\n\n  createSvgNode({ m, w, h }) {\n    const node = createElement('svg');\n    node.setAttribute('width', w + m.left + m.right);\n    node.setAttribute('height', h + m.top + m.bottom);\n    return node;\n  }\n\n  createSvgRoot({ node, m }) {\n    return select(node)\n      .append('g')\n      .attr('transform', `translate(${m.left}, ${m.top})`);\n  }\n\n  createXAxis({ root, m, w, h, x }) {\n    const {\n      xType,\n      axisLabels: { x: label },\n      xTicks,\n      grid,\n      verticalGrid,\n      tickTimeDisplayFormat,\n      yAxisOrientRight\n    } = this.props;\n\n    const axis = svg.axis()\n      .scale(x)\n      .orient('bottom');\n\n    if (xType === 'time' && tickTimeDisplayFormat) {\n      axis\n        .tickFormat(time.format(tickTimeDisplayFormat));\n    }\n\n    if (grid && verticalGrid) {\n      axis\n        .tickSize(-h, 6)\n        .tickPadding(15);\n    } else {\n      axis\n        .tickSize(0)\n        .tickPadding(15);\n    }\n\n    if (xTicks) {\n      axis.ticks(xTicks);\n    }\n\n    const group = root\n      .append('g')\n      .attr('class', 'x axis')\n      .attr('transform', `translate(0, ${h})`);\n\n    group\n      .call(axis);\n\n    if (label) {\n      group\n        .append('text')\n        .attr('class', 'label')\n        .attr('y', m.bottom - 10)\n        .attr('x', yAxisOrientRight ? 0 : w)\n        .style('text-anchor',\n          (yAxisOrientRight)\n            ? 'start'\n            : 'end')\n        .text(label);\n    }\n  }\n\n  createYAxis({ root, m, w, y }) {\n    const {\n      yType,\n      axisLabels: { y: label },\n      yTicks,\n      grid,\n      tickTimeDisplayFormat,\n      yAxisOrientRight\n    } = this.props;\n\n    const axis = svg.axis()\n      .scale(y)\n      .orient(yAxisOrientRight ? 'right' : 'left');\n\n    if (yType === 'time' && tickTimeDisplayFormat) {\n      axis\n        .tickFormat(time.format(tickTimeDisplayFormat));\n    }\n    if (grid) {\n      axis\n        .tickSize(-w, 6)\n        .tickPadding(12);\n    } else {\n      axis\n        .tickPadding(10);\n    }\n\n    if (yTicks) {\n      axis.ticks(yTicks);\n    }\n\n    const group = root\n      .append('g')\n      .attr('class', 'y axis')\n      .attr('transform',\n        (yAxisOrientRight)\n          ? `translate(${w}, 0)`\n          : 'translate(0, 0)');\n\n    group\n      .call(axis);\n\n    if (label) {\n      group\n        .append('text')\n        .attr('class', 'label')\n        .attr('transform', 'rotate(-90)')\n        .attr('x', 0)\n        .attr('y',\n          (yAxisOrientRight)\n            ? -20 + m.right\n            : 0 - m.left)\n        .attr('dy', '.9em')\n        .style('text-anchor', 'end')\n        .text(label);\n    }\n  }\n\n  createLinePathChart({ root, x, y, xValue, yValue, colors }) {\n    const {\n      data,\n      interpolate\n    } = this.props;\n\n    const getStroke = (d, i) => colors[i];\n\n    const linePath = svg.line()\n      .interpolate(interpolate)\n      .x((d) => x(xValue(d)))\n      .y((d) => y(yValue(d)));\n\n    const group = root\n      .append('g')\n      .attr('class', 'lineChart');\n\n    group\n      .selectAll('path')\n      .data(data)\n      .enter()\n      .append('path')\n      .attr('class', 'line')\n      .style('stroke', getStroke)\n      .attr('d', linePath);\n  }\n\n  createPoints({ root, x, y, colors }) {\n    const {\n      data,\n      xType,\n      yType,\n      mouseOverHandler,\n      mouseOutHandler,\n      mouseMoveHandler,\n      clickHandler\n    } = this.props;\n\n    /*\n     * We don't really need to do this, but it\n     * avoids obscure \"this\" below\n     */\n    const calculateDate = (v) => this.parseDate(v);\n\n    const getStroke = (d, i) => colors[i];\n\n    /*\n     * Creating the calculation functions\n     */\n    const calculateCX = (d) => (\n      (xType === 'time')\n        ? x(calculateDate(d.x))\n        : x(d.x));\n    const calculateCY = (d) => (\n      (yType === 'time')\n        ? y(calculateDate(d.y))\n        : y(d.y));\n\n    const mouseover = (d) => mouseOverHandler(d, lastEvent);\n    const mouseout = (d) => mouseOutHandler(d, lastEvent);\n    const mousemove = (d) => mouseMoveHandler(d, lastEvent);\n    const click = (d) => clickHandler(d, lastEvent);\n\n    const group = root\n      .append('g')\n      .attr('class', 'dataPoints');\n\n    data.forEach((item) => {\n      item.forEach((d) => {\n        /*\n         * Applying the calculation functions\n         */\n        group\n          .datum(d)\n          .append('circle')\n          .attr('class', 'data-point')\n          .style('strokeWidth', '2px')\n          .style('stroke', getStroke)\n          .style('fill', 'white')\n          .attr('cx', calculateCX)\n          .attr('cy', calculateCY)\n          .on('mouseover', mouseover)\n          .on('mouseout', mouseout)\n          .on('mousemove', mousemove)\n          .on('click', click);\n      });\n    });\n  }\n\n  createStyle() {\n    const {\n      style,\n      grid,\n      verticalGrid,\n      yAxisOrientRight\n    } = this.props;\n\n    const uid = this.uid;\n    const scope = `.line-chart-${uid}`;\n    const axisStyles = getAxisStyles(grid, verticalGrid, yAxisOrientRight);\n    const rules = merge({}, defaultStyles, style, axisStyles);\n\n    return (\n      <Style\n        scopeSelector={scope}\n        rules={rules}\n      />\n    );\n  }\n\n  parseDate(v) {\n    const {\n      datePattern\n    } = this.props;\n\n    const datePatternParser = (\n      dateParser[datePattern] || (\n      dateParser[datePattern] = parse(datePattern)));\n\n    return datePatternParser(v);\n  }\n\n  calculateChartParameters() {\n    const {\n      data,\n      axes,\n      xType,\n      yType,\n      xDomainRange,\n      yDomainRange,\n      margin,\n      width,\n      height,\n      lineColors,\n      yAxisOrientRight\n    } = this.props;\n\n    /*\n     * We could \"bind\"!\n     */\n    const parseDate = (v) => this.parseDate(v);\n\n    /*\n     * 'w' and 'h' are the width and height of the graph canvas\n     * (excluding axes and other furniture)\n     */\n    const m = calculateMargin(axes, margin, yAxisOrientRight);\n    const w = reduce(width, m.left, m.right);\n    const h = reduce(height, m.top, m.bottom);\n\n    const x = createDomainRangeGenerator('x', xDomainRange, data, xType, w, parseDate);\n    const y = createDomainRangeGenerator('y', yDomainRange, data, yType, h, parseDate);\n\n    const xValue = createValueGenerator('x', xType, parseDate);\n    const yValue = createValueGenerator('y', yType, parseDate);\n\n    const colors = lineColors.concat(defaultColors);\n\n    const node = this.createSvgNode({ m, w, h });\n    const root = this.createSvgRoot({ node, m });\n\n    return {\n      m,\n      w,\n      h,\n      x,\n      y,\n      xValue,\n      yValue,\n      colors,\n      node,\n      root\n    };\n  }\n\n  render() {\n    const {\n      axes,\n      dataPoints\n    } = this.props;\n\n    const p = this.calculateChartParameters();\n\n    if (axes) {\n      this.createXAxis(p);\n\n      this.createYAxis(p);\n    }\n\n    this.createLinePathChart(p);\n\n    if (dataPoints) {\n      this.createPoints(p);\n    }\n\n    const uid = this.uid;\n    const className = `line-chart-${uid}`;\n    const {\n      node\n    } = p;\n\n    return (\n      <div ref=\"lineChart\" className={className}>\n        {this.createStyle()}\n        {node.toReact()}\n      </div>\n    );\n  }\n}\n"]}